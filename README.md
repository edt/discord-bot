# discord-bot


## Features

The following is a list of features the bot should get:

- [ ] reminder function to ping one or more people
  `!remind "Schnitzel" "datetime" @user1 @user2`
- [ ] access control

## Available commands

For general info or info about a specific command call `!help` or `!help command`.

`!r <subreddit>` -  Post random post of the current top 30 of the named subreddit

`!reddit add|remove|list` - Post daily subreddit top post.

`!log` - Upload the latest log file.

`!reboot` - Reboot the bot.

`!remind` - not implemented

`!roll` -  roll an arbitrary amount of dices.

`!shutdown` - Stop the damn thing

`!status`    Give server/bot state.

`!upgrade`   Upgrade the bot

`!upload`    Upload images to commands. Commands are auto generated.

`!help`      Shows help message. Auto generated by discord.py

## Commandline Usage

The following arguments are available:

#### -h, --help

  Print arguments, etc.

#### -v[vvvv]

Set log level. Maximum is 5.

#### -c, --config <config.json>

Manually set the config that shall be used.

#### --reset

Purge cache before starting.

#### --data <directory>

Local directory for permanent local data.

## Config File

The default configuration file is called setting.ini.
It typically resides in the directory of discord-bot.

Alternative location can be specified with `--config`.

The content should look like:

```INI
[General]
token = discord-bot-oauth-token
data_dir = /usr/data/stuff
cache_dir = /var/data/discord-bot/cache

[reddit]
id = reddit-app-id
token = reddit-app-auth-token
agent = blob-bot script v1.0 by rawplus

[git]
user = Jack Black
email = jack@black.com
```

## Dependencies

Currently this project has the following dependencies:

- discord.py
- PRAW
- tabulate

They can be installed with the following command on Debian based systems:

`sudo pip3 install -r requirements.txt`

## Setup

    python -m venv venv
    source ./venv/vin/active
    pip install -r ./discord-bot/requirements.txt
    ./discord-bot/discord-bot
    
This assumes a working `settings.ini` in the discord-bot directory!
